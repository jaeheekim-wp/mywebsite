{
  "hash": "bfdfd95758d4d433284a4499c42df9ed",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: LS 빅데이터 스쿨 HW5\nauthor: 재희\ndate: '2024-07-30'\ncategories:\n  - bigdata\n---\n\n# 해당 그래프에서 성별에 따른  95프로 신뢰 구간을 표시하기.\n\n::: {#05c08597 .cell execution_count=1}\n``` {.python .cell-code}\n# !pip install pyreadstat\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n\nraw_welfare = pd.read_spss(\"../../data/plz/Koweps_hpwc14_2019_beta2.sav\")\nraw_welfare \n\nwelfare =  raw_welfare.copy()\nwelfare \n\n# 변수명 변경 \nwelfare = welfare.rename(columns = {\n        \"h14_g3\" : \"sex\",\n        \"h14_g4\" : \"birth\",\n        \"h14_g10\": \"marriage_type\",\n        \"h14_g11\": \"religion\",\n        \"p1402_8aq1\" : \"income\",\n        \"h14_eco9\" : \"code_job\",\n        \"h14_reg7\" : \"code_region\"})\nwelfare\n\nwelfare = welfare[[\"sex\", \"birth\",\"marriage_type\",\"religion\",\"income\",\"code_job\",\"code_region\"]]\n\n# 변수 검토 \nwelfare['sex'].dtypes\nwelfare['sex'].value_counts()\n# welfare['sex'].isna().sum()\n\n\nwelfare['sex'] = np.where(welfare[\"sex\"] == 1,'male','female')\nwelfare['sex']\n\n# 월급 변수 \nwelfare[\"income\"].describe()\nwelfare['income'].isna().sum()\n\n# \nsum(welfare[\"income\"] > 9998)\n\n\nsex_income = welfare.dropna(subset = 'income') \\\n                    .groupby('sex', as_index = False) \\\n                    .agg(mean_income = ('income', 'mean'),\n                         std_income=('income', 'std'),\n                         count_income=('income', 'count'))\nsex_income  \n\n\n# 그래프\n\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nsns.barplot(data = sex_income, x = \"sex\",y = \"mean_income\",\\\n            hue = \"sex\")\nplt.show()\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n![](hw5_files/figure-html/cell-2-output-1.png){width=593 height=429}\n:::\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n# 신뢰구간 1\n\n::: {#0dc9f4f7 .cell execution_count=2}\n``` {.python .cell-code}\nfrom scipy.stats import norm\n\n\nleft = norm.ppf(0.025, loc=sex_income['mean_income'], scale=(sex_income['std_income'] / np.sqrt(sex_income['count_income'])))\n\nleft\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\narray([180.83045468, 340.1125923 ])\n```\n:::\n:::\n\n\n# 신뢰구간 2\n\n::: {#11baa640 .cell execution_count=3}\n``` {.python .cell-code}\nright = norm.ppf(0.975, loc=sex_income['mean_income'], scale=(sex_income['std_income'] / np.sqrt(sex_income['count_income'])))\n\nright\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```\narray([191.75573685, 357.96254968])\n```\n:::\n:::\n\n\n# 그래프 \n\nimport seaborn as sns\n\nplt.bar(sex_income, yerr = [left, right], alpha = 0.4)\nplt.show()\n\n",
    "supporting": [
      "hw5_files"
    ],
    "filters": [],
    "includes": {}
  }
}